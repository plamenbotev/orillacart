;(function(window,$){window.shop_helper=new function(){this.ajaxurl='';this.ID=null;this.req=null;this.recalc_params=jQuery.Callbacks();this.after_recalc_price=jQuery.Callbacks();this.recalc_price=function(pid){if(!pid)
return false;jQuery('#submit-form-container, .product-attributes').block({message:null,overlayCSS:{background:'#fff ',opacity:0.6}});var data={p:[],f:[],}
this.recalc_params.fire(data);jQuery("#com-shop #product_attributes select.property").each(function(i){switch(this.nodeName.toLowerCase()){case"select":if(this.value)
data.p.push(this.value);break;case"input":if(this.type.toLowerCase()!='radio')
break;if(!this.checked)
break;data.p.push(this.value);break;}});jQuery("#com-shop input[name=files\\[\\]]").each(function(i){if(jQuery(this).attr('checked')){data.f.push(jQuery(this).val());}});var ajaxurl=this.ajaxurl;if(this.req){this.req.abort();}
var $this=this;this.req=jQuery.ajax({type:"post",url:ajaxurl+"?action=ajax-call-front&component=shop&con=product&task=get_price&pid="+pid,data:data,success:function(res,text){if(typeof res['id']!="undefined"){$this.ID=res['id'];for(var key in res.block){jQuery("#product_"+key).html(res.block[key]);}
$this.after_recalc_price.fire(this);$this.initGallery();}else{jQuery("#com-shop #price_container").html(res.price);$this.after_recalc_price.fire(this);}
jQuery('#submit-form-container, .product-attributes').unblock();},error:function(request,status,error){jQuery('#submit-form-container, .product-attributes').unblock();}});}
this.initGallery=function(){var total=jQuery("#com-shop #gallery a, [rel^='lightbox']").length;jQuery("#com-shop #gallery a, [rel^='lightbox']").slimbox(0,'',function(e,i){if(i==0&&total>1)
return false;return true;});}
function registry(options){this.data=options;this.get=function(k,def){if(typeof this.data!="undefined"&&typeof this.data[k]!="undefined"&&this.data[k]!=null){return this.data[k];}else{if(typeof def!="undefined"&&def!=null)
return def;return"";}}}}})(window,jQuery)